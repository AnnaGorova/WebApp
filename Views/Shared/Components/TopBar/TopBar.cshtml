@using WebApp.Entities
@using WebApp.ViewModels
@using System.Security.Claims
@{
    var viewModel = (TopBarViewModels)Model;

    var isAuthenticated = Context.User.Identity?.IsAuthenticated ?? false;

    var userName = Context.User.FindFirst(ClaimTypes.Name)?.Value ?? Context.User.Identity?.Name;

    var userId = Context.User.FindFirst("UserId")?.Value;
}
<div class="container-fluid bg-dark px-5 d-none d-lg-block">
    <div class="row gx-0">
        <div class="col-lg-6 text-center text-lg-start mb-2 mb-lg-0">
            <div class="d-inline-flex align-items-center" style="height: 45px;">
                @foreach (Option oneOption in viewModel.ContactInformation)

                {
                    <small class="text-light">
                        @Html.Raw(oneOption.Key)
                        @oneOption.Value
                    </small>
                }
            </div>
        </div>
        <div class="col-lg-6 text-center text-lg-end">
            <div class="d-inline-flex align-items-center" style="height: 45px;">
                <!-- Кнопка My Profile -->
                @if (isAuthenticated)

                {
                    <!-- Авторизований користувач -->
                    <div class="dropdown">
                        <button class="btn btn-sm btn-outline-light dropdown-toggle me-2"
                                type="button" id="profileDropdown"
                                data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle me-1"></i> @userName
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                            <li>
                                <a class="dropdown-item" href="/Account/Profile">
                                    <i class="bi bi-person me-2"></i> Мій профіль
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="/">
                                    <i class="bi bi-house me-2"></i> Головна
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <!-- ⭐⭐⭐ POST-ФОРМА ДЛЯ БЕЗПЕЧНОГО ВИХОДУ ⭐⭐⭐ -->
                                <form asp-controller="Account" asp-action="LogoutPost" method="post"
                                      class="dropdown-item p-0" style="cursor: pointer;">
                                    @Html.AntiForgeryToken()
                                    <button type="submit" class="btn btn-link text-danger p-0 text-decoration-none w-100 text-start">
                                        <i class="bi bi-box-arrow-right me-2"></i> Вийти
                                    </button>
                                </form>
                            </li>
                        </ul>
                    </div>
                }

                else

                {
                    <!-- Неавторизований користувач -->
                    <div class="dropdown">
                        <button class="btn btn-sm btn-outline-light dropdown-toggle me-2"
                                type="button" id="authDropdown"
                                data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="bi bi-person-circle me-1"></i> My Profile
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="authDropdown">
                            <li>
                                <a class="dropdown-item" href="/Account/LoginIn">
                                    <i class="bi bi-box-arrow-in-right me-2"></i> Увійти
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="/Account/RegisterIn">
                                    <i class="bi bi-person-plus me-2"></i> Зареєструватися
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <h6 class="dropdown-header">Або через:</h6>
                            </li>
                            <li>
                                <a class="dropdown-item" href="/Account/LoginWithPhone">
                                    <i class="bi bi-phone me-2"></i> Телефон
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="/Account/GoogleLogin">
                                    <i class="bi bi-google me-2"></i> Google
                                </a>
                            </li>
                        </ul>
                    </div>
                }

                <!-- Соціальні мережі -->
                @foreach (Option oneOption in viewModel.SocialLinks)

                {
                    <a class="btn btn-sm btn-outline-light btn-sm-square rounded-circle me-2"
                       href="@oneOption.Value">
                        @Html.Raw(oneOption.Key)
                    </a>
                }
            </div>
        </div>
    </div>
</div>

@*
@using WebApp.Entities
@using WebApp.ViewModels
@{
    var viewModel = (TopBarViewModels)Model;
}
<div class="container-fluid bg-dark px-5 d-none d-lg-block">
    <div class="row gx-0">
        <div class="col-lg-8 text-center text-lg-start mb-2 mb-lg-0">
            <div class="d-inline-flex align-items-center" style="height: 45px;">
                @foreach (Option oneOption in viewModel.ContactInformation)

                {
                    <small class="text-light">
                        @Html.Raw(oneOption.Key)
                        @oneOption.Value
                    </small>
                }
            </div>
        </div>
        <div class="col-lg-4 text-center text-lg-end">
            <div class="d-inline-flex align-items-center" style="height: 45px;">
                @foreach (Option oneOption in viewModel.SocialLinks)

                {
                    <a class="btn btn-sm btn-outline-light btn-sm-square rounded-circle me-2"
                       href=@oneOption.Value>
                        @Html.Raw(oneOption.Key)
                    </a>
                }
            </div>
        </div>
    </div>
</div>
*@
