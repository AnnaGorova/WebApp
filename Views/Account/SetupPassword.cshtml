@{
    ViewData["Title"] = "Встановити пароль для телефонного акаунта";
    Layout = "_AccountLayout";
}

<div class="card">
    <div class="card-body flex flex-col gap-5 p-10">
        <h3 class="text-lg font-medium text-gray-900 leading-none mb-2.5">
            Встановити пароль
        </h3>

        <div class="bg-blue-100 border border-blue-300 text-blue-800 p-3 rounded mb-4">
            <p class="mb-1"><strong>📱 Акаунт зареєстровано через телефон</strong></p>
            <p class="mb-0 text-sm">
                Ви реєструвалися через телефон <strong>@ViewBag.ExistingPhone</strong>.
                Щоб мати можливість входити через email та пароль, встановіть пароль нижче.
            </p>
        </div>

        <p class="text-gray-700">
            <i class="bi bi-phone text-primary mr-1"></i>
            Ваш телефонний акаунт:
            <strong>@ViewBag.ExistingEmail</strong>
        </p>

        @if (!string.IsNullOrEmpty(ViewBag.ExistingLogin))
        {
            <p class="text-gray-600">
                Логін: <strong>@ViewBag.ExistingLogin</strong>
            </p>
        }

        <form method="post" asp-action="SetupPasswordForPhone">
            @Html.AntiForgeryToken()

            <input type="hidden" name="userId" value="@ViewBag.ExistingUserId" />
            <input type="hidden" name="email" value="@ViewBag.ExistingEmail" />
            <input type="hidden" name="phone" value="@ViewBag.ExistingPhone" />
            <input type="hidden" name="login" value="@ViewBag.ExistingLogin" />

            <div class="flex flex-col gap-1 mb-4">
                <label class="form-label font-normal text-gray-900">
                    Новий пароль
                </label>
                <div class="input" data-toggle-password="true">
                    <input name="password" placeholder="Введіть пароль" type="password" required
                           minlength="6" />
                </div>
                <small class="text-gray-500">Мінімум 6 символів</small>
            </div>

            <div class="flex flex-col gap-1 mb-4">
                <label class="form-label font-normal text-gray-900">
                    Підтвердження пароля
                </label>
                <div class="input" data-toggle-password="true">
                    <input name="confirmPassword" placeholder="Повторіть пароль" type="password" required />
                </div>
            </div>

            <button type="submit" class="btn btn-primary flex justify-center w-full mb-2">
                <i class="bi bi-shield-lock me-2"></i> Встановити пароль
            </button>

            <a href="@Url.Action("LoginWithPhone")" class="btn btn-outline-secondary flex justify-center w-full mb-2">
                <i class="bi bi-phone me-2"></i> Увійти через телефон
            </a>

            <a href="@Url.Action("LoginIn")" class="btn btn-light flex justify-center w-full">
                <i class="bi bi-envelope me-2"></i> Спробувати інший email
            </a>
        </form>
    </div>
</div>