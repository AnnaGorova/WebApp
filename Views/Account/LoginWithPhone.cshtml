@{
    ViewData["Title"] = "Вхід через телефон";
    Layout = "_AccountLayout";
}

<div class="card">
    <div class="card-body flex flex-col gap-5 p-10">
        <div class="text-center mb-2.5">
            <h3 class="text-lg font-medium text-gray-900 leading-none mb-2.5">
                Вхід через телефон
            </h3>
            <div class="flex items-center justify-center font-medium">
                <span class="text-2sm text-gray-700 me-1.5">
                    Немає акаунту?
                </span>
                <a class="text-2sm link" href="/Account/RegisterWithPhone">
                    Зареєструватись
                </a>
            </div>
        </div>

        @if (TempData["ErrorMessage"] != null)
        {
            <div style="background: #dc2626; color: white; padding: 12px; border-radius: 6px; margin: 10px 0; border: 1px solid #b91c1c;">
                <p style="margin: 0; font-weight: 500;">@TempData["ErrorMessage"]</p>
            </div>
        }

        @if (TempData["SuccessMessage"] != null)
        {
            <div style="background: #10b981; color: white; padding: 12px; border-radius: 6px; margin: 10px 0; border: 1px solid #059669;">
                <p style="margin: 0; font-weight: 500;">@TempData["SuccessMessage"]</p>
            </div>
        }

        <!-- ⚠️ ВИПРАВЛЕНО ТУТ: змінено asp-action та додано AntiForgeryToken -->
        <form asp-controller="Account" asp-action="LoginWithPhone" method="post">
            @Html.AntiForgeryToken()

            <div class="flex flex-col gap-1 mb-4">
                <label class="form-label font-normal text-gray-900">
                    Номер телефону
                </label>
                <input class="input"
                       name="phoneNumber"
                       placeholder="+380501234567"
                       type="tel"
                       pattern="\+380\d{9}"
                       required />
                <small class="text-xs text-gray-500 mt-1">
                    Формат: +380501234567
                </small>
            </div>

            <button type="submit" class="btn btn-primary flex justify-center w-full">
                Отримати код по SMS
            </button>
        </form>

        <div class="flex items-center gap-2 mt-4">
            <span class="border-t border-gray-200 w-full"></span>
            <span class="text-2xs text-gray-500 font-medium uppercase">Або</span>
            <span class="border-t border-gray-200 w-full"></span>
        </div>

        <div class="flex flex-col gap-2">
            <a class="btn btn-light justify-center"
               asp-controller="Account"
               asp-action="LoginIn">
                <svg class="size-3.5 shrink-0 mr-2" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
                </svg>
                Увійти через Email
            </a>

            <a class="btn btn-light justify-center"
               asp-controller="Account"
               asp-action="GoogleLogin">
                <img alt="" class="size-3.5 shrink-0 mr-2" src="~/assets/media/brand-logos/google.svg" />
                Увійти через Google
            </a>
        </div>
    </div>
</div>